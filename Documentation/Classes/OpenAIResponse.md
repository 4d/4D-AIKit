# OpenAIResponse

The `OpenAIResponse` class represents a response object from the OpenAI Responses API.

## Properties

### id
**Type**: Text

The unique identifier for the response.

### object
**Type**: Text

The object type (typically "response").

### model
**Type**: Text

The model that generated the response.

### created
**Type**: Integer

Unix timestamp of when the response was created.

### output
**Type**: Variant

The output content generated by the model. Can be text, structured JSON, or other formats.

### status
**Type**: Text

The current status of the response. Possible values:
- "completed" or "done": Response generation is complete
- "processing" or "in_progress": Response is still being generated
- "failed" or "error": Response generation failed

### usage
**Type**: Object

Token usage information for the response. Typically includes:
- `prompt_tokens`: Number of tokens in the prompt
- `completion_tokens`: Number of tokens in the completion
- `total_tokens`: Total tokens used

### metadata
**Type**: Object

Custom metadata associated with the response.

### conversation_id
**Type**: Text

The ID of the conversation this response belongs to, if applicable.

## Functions

### text

**get text** : Text

| Property        | Type    | Description                               |
|-----------------|---------|-------------------------------------------|
| Function result | Text    | The text output or empty string if not available |

Returns the text output from the response. Handles different output structures automatically.

#### Example Usage

```4d
var $response:=$result.response
var $text:=$response.text
TRACE($text)
```

### isComplete

**get isComplete** : Boolean

| Property        | Type    | Description                               |
|-----------------|---------|-------------------------------------------|
| Function result | Boolean | True if the response is complete          |

Checks if the response generation is complete.

#### Example Usage

```4d
var $response:=$result.response
If ($response.isComplete)
    TRACE("Response is ready: "+$response.text)
End if
```

### isFailed

**get isFailed** : Boolean

| Property        | Type    | Description                               |
|-----------------|---------|-------------------------------------------|
| Function result | Boolean | True if the response generation failed    |

Checks if the response generation failed.

#### Example Usage

```4d
var $response:=$result.response
If ($response.isFailed)
    TRACE("Response generation failed")
End if
```

### isProcessing

**get isProcessing** : Boolean

| Property        | Type    | Description                               |
|-----------------|---------|-------------------------------------------|
| Function result | Boolean | True if the response is still processing  |

Checks if the response is still being generated.

#### Example Usage

```4d
var $response:=$result.response
If ($response.isProcessing)
    TRACE("Response is still processing...")
    // Poll again later or wait for completion
End if
```

## Example Usage

### Basic Usage

```4d
var $result:=$client.responses.create("Hello"; {model: "gpt-4o"})
var $response:=$result.response

TRACE("Response ID: "+$response.id)
TRACE("Model: "+$response.model)
TRACE("Status: "+$response.status)
TRACE("Text: "+$response.text)
```

### Checking Response Status

```4d
var $response:=$result.response

Case of
    : ($response.isComplete)
        TRACE("Complete: "+$response.text)
    : ($response.isProcessing)
        TRACE("Processing...")
    : ($response.isFailed)
        TRACE("Failed")
End case
```

### Accessing Usage Information

```4d
var $response:=$result.response

If ($response.usage#Null)
    TRACE("Prompt tokens: "+String($response.usage.prompt_tokens))
    TRACE("Completion tokens: "+String($response.usage.completion_tokens))
    TRACE("Total tokens: "+String($response.usage.total_tokens))
End if
```

### Working with Metadata

```4d
var $response:=$result.response

If ($response.metadata#Null)
    TRACE("User ID: "+$response.metadata.user_id)
    TRACE("Session: "+$response.metadata.session)
End if
```

### Multi-turn Conversations

```4d
// First turn
var $result1:=$client.responses.create("What is AI?"; {model: "gpt-4o"; conversation: "conv_123"})
var $response1:=$result1.response
TRACE("First response: "+$response1.text)

// Second turn - reference first response
var $params:=cs.OpenAIResponsesParameters.new()
$params.model:="gpt-4o"
$params.conversation:=$response1.conversation_id
$params.previous_response_id:=$response1.id

var $result2:=$client.responses.create("Tell me more"; $params)
var $response2:=$result2.response
TRACE("Second response: "+$response2.text)
```
